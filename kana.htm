<script language="javascript">
        var prefs = new _IG_Prefs();
        var KanaPref = prefs.getString("SelKana");
        var TimerPref = prefs.getBool("selTimer");
        var DurPref = prefs.getInt("selDuration");
        var KanaString = "";
        var Timer;
        var TimerValue;

        function TimerInit()
          {
            TimerValue = DurPref;
            TimerStart();
          }
          
        function TimerStart()
          {
            if(TimerValue >= -1)
              {
                document.getElementById('kanatimer').innerHTML = "<span class='transparant'>Timer: " + TimerValue + "</span>";
                if(TimerValue >= 0)
                  {
                    TimerValue--;
                    Timer = setTimeout('TimerStart()',1000);
                  }
                else
                  {
                    DisplayKana();
                  }
              }    
          }
        
        var kanaArray = [[[]]];
          kanaArray[0] = ["A","\u3042","\u30a2"];
          kanaArray[1] = ["I","\u3044","\u30a4"];
          kanaArray[2] = ["U","\u3046","\u30a6"];
          kanaArray[3] = ["E","\u3048","\u30a8"];
          kanaArray[4] = ["O","\u304a","\u30aa"];
          kanaArray[5] = ["KA","\u304b","\u30ab"];
          kanaArray[6] = ["KI","\u304d","\u30ad"];
          kanaArray[7] = ["KU","\u304f","\u30af"];
          kanaArray[8] = ["KE","\u3051","\u30b1"];
          kanaArray[9] = ["KO","\u3053","\u30b3"];
          kanaArray[10] = ["GA","\u304c","\u30ac"];
          kanaArray[11] = ["GI","\u304e","\u30ae"];
          kanaArray[12] = ["GU","\u3050","\u30b0"];
          kanaArray[13] = ["GE","\u3052","\u30b2"];
          kanaArray[14] = ["GO","\u3054","\u30b4"];
          kanaArray[15] = ["SA","\u3055","\u30b5"];
          kanaArray[16] = ["SHI","\u3057","\u30b7"];
          kanaArray[17] = ["SU","\u3059","\u30b9"];
          kanaArray[18] = ["SE","\u305b","\u30bb"];
          kanaArray[19] = ["SO","\u305d","\u30bd"];
          kanaArray[20] = ["ZA","\u3056","\u30b6"];
          kanaArray[21] = ["JI","\u3058","\u30b8"];
          kanaArray[22] = ["ZU","\u305a","\u30ba"];
          kanaArray[23] = ["ZE","\u305c","\u30bc"];
          kanaArray[24] = ["ZO","\u305e","\u30be"];
          kanaArray[25] = ["TA","\u305f","\u30bf"];
          kanaArray[26] = ["CHI","\u3061","\u30c1"];
          kanaArray[27] = ["TSU","\u3064","\u30c4"];
          kanaArray[28] = ["TE","\u3066","\u30c6"];
          kanaArray[29] = ["TO","\u3068","\u30c8"];
          kanaArray[30] = ["DA","\u3060","\u30c0"];
          kanaArray[31] = ["JI","\u3062","\u30c2"];
          kanaArray[32] = ["ZU","\u3065","\u30c5"];
          kanaArray[33] = ["DE","\u3067","\u30c7"];
          kanaArray[34] = ["DO","\u3069","\u30c9"];
          kanaArray[35] = ["NA","\u306a","\u30ca"];
          kanaArray[36] = ["NI","\u306b","\u30cb"];
          kanaArray[37] = ["NU","\u306c","\u30cc"];
          kanaArray[38] = ["NE","\u306d","\u30cd"];
          kanaArray[39] = ["NO","\u306e","\u30ce"];
          kanaArray[40] = ["HA","\u306f","\u30cf"];
          kanaArray[41] = ["HI","\u3072","\u30d2"];
          kanaArray[42] = ["FU","\u3075","\u30d5"];
          kanaArray[43] = ["HE","\u3078","\u30d8"];
          kanaArray[44] = ["HO","\u307b","\u30db"];
          kanaArray[45] = ["BA","\u3070","\u30d0"];
          kanaArray[46] = ["BI","\u3073","\u30d3"];
          kanaArray[47] = ["BU","\u3076","\u30d6"];
          kanaArray[48] = ["BE","\u3079","\u30d9"];
          kanaArray[49] = ["BO","\u307c","\u30dc"];
          kanaArray[50] = ["PA","\u3071","\u30d1"];
          kanaArray[51] = ["PI","\u3074","\u30d4"];
          kanaArray[52] = ["PU","\u3077","\u30d7"];
          kanaArray[53] = ["PE","\u307a","\u30da"];
          kanaArray[54] = ["PO","\u307d","\u30dd"];
          kanaArray[55] = ["MA","\u307e","\u30de"];
          kanaArray[56] = ["MI","\u307f","\u30df"];
          kanaArray[57] = ["MU","\u3080","\u30e0"];
          kanaArray[58] = ["ME","\u3081","\u30e1"];
          kanaArray[59] = ["MO","\u3082","\u30e2"];
          kanaArray[60] = ["YA","\u3084","\u30e4"];
          kanaArray[61] = ["YU","\u3086","\u30e6"];
          kanaArray[62] = ["YO","\u3088","\u30e8"];
          kanaArray[63] = ["RA","\u3089","\u30e9"];
          kanaArray[64] = ["RI","\u308a","\u30ea"];
          kanaArray[65] = ["RU","\u308b","\u30eb"];
          kanaArray[66] = ["RE","\u308c","\u30ec"];
          kanaArray[67] = ["RO","\u308d","\u30ed"];
          kanaArray[68] = ["WA","\u308f","\u30ef"];
          kanaArray[69] = ["WO","\u3092","\u30f2"];
          kanaArray[70] = ["N","\u3093","\u30f3"];
        
        function RanNo(iUpper)
          {
            var x = Math.floor(Math.random() * iUpper);
            return x;
          }
        
        function DisplayKana()
          {
            var k = RanNo(kanaArray.length);
            switch (KanaPref)
              {
                case "hiragana":
                  KanaString = kanaArray[k][1];
                  break;
                case "katakana":
                  KanaString = kanaArray[k][2];
                  break;
                case "random":
                  var ranKana = RanNo(2); //determines random number for kana index
                  ranKana = ranKana+1;
                  KanaString = kanaArray[k][ranKana]; 
                  break;
                case "both":
                  KanaString = kanaArray[k][1] + "/" + kanaArray[k][2];
                  break;
              }
            document.getElementById('kana').innerHTML = KanaString;
            document.getElementById('romaji').innerHTML = kanaArray[k][0];
            if (TimerPref == true && DurPref > 0)
              {
                TimerInit();
              }
            else
              {
                document.getElementById('kanatimer').innerHTML = "<button name='refresh' type='button' onclick='javascript:DisplayKana();'>New Kana</button>";
              }    
          }
        
        function DisplayFooter()
          {
            var msg = "";
            var CurrentDate = new Date();
            var msgArray = [[]];
              msgArray[0] = [Date.parse("03/18/2009"),"New settings are available. Thanks Leon for the idea!"];
            var msgArrayLen = msgArray.length;
        
            for (var i = 0; i < msgArrayLen; i++)
              {
                var ExpDate = msgArray[i][0];
                if (CurrentDate < ExpDate)
                  {
                    msg = msgArray[i][1] + "<br />" + msg;
                  }
              }
            document.getElementById('kanafooter').innerHTML = msg + "<a href='mailto:baledin@gmail.com'>I always appreciate feedback</a>.";
          }
          
        //-->
      </script>
      <div id="container">
        <div id="kanatimer"><button name="refresh" type="button" onclick="javascript:DisplayKana();">New Kana</button></div>
        <div class="chardisplay" id="kana" onmouseout="{document.getElementById('romaji').style.visibility='hidden';}" onmouseover="{document.getElementById('romaji').style.visibility='visible';}">„Åæ</div>
        <div class="chardisplay" id="romaji" style="visibility: hidden;">MA</div>
      </div>  
      <div class="transparant" id="kanafooter"><a href="mailto:baledin@gmail.com">I always appreciate feedback</a>.</div>
      <script language="javascript" type="text/javascript">
        <!--
          DisplayKana();
          DisplayFooter();
        //-->
      </script>
    
  <script>gadgets.util.runOnLoadHandlers();</script><script>window.google.csi.tickDl();
</script>